<!--Ejercicio 2 — Listado de productos con búsqueda
Objetivo: practicar v-for, :key, filtros y estados vacíos.
 Requisitos:
Lista local con id, nombre, precio, stock.
Input de búsqueda (case‑insensitive) que filtra por nombre.
Estado vacío: mostrar mensaje si no hay resultados.
Estilo/flag visual para stock === 0.
Botón “Agregar al carrito” que emite un evento con el id.-->

<!DOCTYPE html>
<html>

<head>
    <title>Agregando/eliminado tareas con v-model :class, :key, v-for, v-if y v-else</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>

<body>

    <div id="app">
        <h2>Lista de productos</h2>

        <!-- Campo de búsqueda -->
        <input v-model="busqueda" placeholder="Buscar producto..." />

        <!-- Formulario para agregar producto -->
        <div>
            <table>
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Nombre</th>
                        <th>Precio</th>
                        <th>Stock</th>
                    </tr>
                    <tr>
                        <td></td>
                        <td><input v-model="nuevoNombre" placeholder="Nombre"></td>
                        <td><input v-model.number="nuevoPrecio" placeholder="Precio" type="number"></td>
                        <td><input v-model.number="nuevoStock" placeholder="Stock" type="number"></td>
                        <td><button @click="agregarProducto">Agregar producto</button></td>
                    </tr>
                </thead>
            </table>
        </div>
        <hr>
        <div>
            <table v-if="productosFiltrados.length">
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Nombre</th>
                        <th>Precio</th>
                        <th>Stock</th>
                    </tr>
                </thead>
                <tbody>

                    <tr v-for="producto in productosFiltrados" :key="producto.id"
                        :class="{ sinStock: producto.stock === 0 }">
                        <td>{{ producto.id }}</td>
                        <td><strong>{{ producto.nombre }}</strong></td>
                        <td>${{ producto.precio }}</td>
                        <td>Stock: {{ producto.stock }}</td>
                        <td><button @click="eliminarProducto(producto)">Eliminar</button></td>
                    </tr>
                </tbody>
            </table>
            <!-- Mensaje cuando no hay resultados -->
            <p v-else class="no-resultados">No hay productos que coincidan con la búsqueda.</p>
        </div>
    </div>


    <style>
        .sinStock {
            color: red;
        }

        button {
            margin-left: 10px;
            cursor: pointer;
        }
    </style>

    <script>
        const { createApp } = Vue;

        createApp({

            data() {
                return {
                    productos: [
                        { id: 1, nombre: "Camiseta", precio: 500, stock: 10 },
                        { id: 2, nombre: "Pantalón", precio: 1200, stock: 5 },
                        { id: 3, nombre: "Zapatos", precio: 2500, stock: 0 }
                    ],
                    nuevoNombre: "",
                    nuevoPrecio: 0,
                    nuevoStock: 0,
                    busqueda: ""
                };
            },

            computed: {
                // Filtrado por nombre, ignorando mayúsculas/minúsculas
                productosFiltrados() {
                    const texto = this.busqueda.trim().toLowerCase();
                    if (!texto) return this.productos;
                    return this.productos.filter(p =>
                        p.nombre.toLowerCase().includes(texto)
                    );
                }
            },

            methods: {
                agregarProducto() {
                    if (this.nuevoNombre.trim() === "" || this.nuevoPrecio <= 0) return;
                    const nuevo = {
                        id: this.productos.length + 1,
                        nombre: this.nuevoNombre,
                        precio: this.nuevoPrecio,
                        stock: this.nuevoStock
                    };
                    this.productos.push(nuevo);

                    // Limpiar inputs
                    this.nuevoNombre = "";
                    this.nuevoPrecio = 0;
                    this.nuevoStock = 0;
                },
                eliminarProducto(producto) {
                    this.productos = this.productos.filter(p => p.id !== producto.id);
                },

                buscarProducto(producto) {
                    this.productos = this.productos.filter(p => p.id !== producto.id);
                }

            }
        }).mount('#app');


    </script>

</body>

</html>